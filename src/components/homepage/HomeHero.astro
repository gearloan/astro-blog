---
/**
 * HomeHero.astro
 * Responsive, image‑backed hero with overlay, headline, subhead, and CTAs.
 *
 * Props:
 *  - title: string
 *  - sub: string
 *  - image: {
 *      alt: string
 *      // Mobile (≤ md) crop
 *      mobile: { avif?: string; webp?: string; jpg: string }
 *      // Desktop (≥ lg) crop
 *      desktop: { avif?: string; webp?: string; jpg: string }
 *    }
 *  - heightClass?: string  // override default height
 *  - primary?: { label: string; href?: string }
 *  - secondary?: { label: string; href?: string }
 */
interface ImgSet { jpg: string }
interface Props {
  title: string
  sub?: string
  image: { alt: string; mobile: ImgSet; desktop: ImgSet }
  heightClass?: string
  primary?: { label: string; href?: string }
  secondary?: { label: string; href?: string }
}
const {
  title,
  sub = "",
  image,
  heightClass = "h-[52vh] min-h-[420px] sm:h-[60vh] lg:h-[72vh]",
  primary,
  secondary,
} = Astro.props as Props;
---

<section class="relative isolate">
  <!-- Media -->
  <div class={`relative w-full overflow-hidden ${heightClass}`}>
    <picture>
      {image.desktop.avif && (
        <source srcset={image.desktop.avif} type="image/avif" media="(min-width: 1024px)" />
      )}
      {image.desktop.webp && (
        <source srcset={image.desktop.webp} type="image/webp" media="(min-width: 1024px)" />
      )}
      <source srcset={image.desktop.jpg} media="(min-width: 1024px)" />

      {image.mobile.avif && (
        <source srcset={image.mobile.avif} type="image/avif" media="(max-width: 1023px)" />
      )}
      {image.mobile.webp && (
        <source srcset={image.mobile.webp} type="image/webp" media="(max-width: 1023px)" />
      )}
      <img
        src={image.mobile.jpg}
        alt={image.alt}
        loading="eager"
        sizes="(min-width: 1280px) 1280px, 100vw"
        class="absolute inset-0 h-full w-full object-cover"
      />
    </picture>

    <!-- Contrast overlay -->
    <div class="absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/30 to-slate-900/10" aria-hidden="true" />
  </div>

  <!-- Copy + CTAs -->
  <div class="pointer-events-none absolute inset-0 flex items-center">
    <div class="pointer-events-auto mx-auto w-full max-w-6xl px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl text-white">
        <h1 class="text-3xl font-bold tracking-tight sm:text-4xl lg:text-5xl">{title}</h1>
        {sub && <p class="mt-4 max-w-2xl text-base/7 text-slate-100/90 sm:text-lg/8">{sub}</p>}

        <div class="mt-6 flex flex-wrap gap-3">
          {primary && (
            <a
              href={primary.href ?? "#"}
              class="inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-semibold text-white shadow-sm ring-1 ring-white/10 bg-sky-700 hover:bg-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-white/80"
            >
              {primary.label}
            </a>
          )}
          {secondary && (
            <a
              href={secondary.href ?? "#"}
              class="inline-flex items-center justify-center rounded-lg px-4 py-2.5 text-sm font-semibold text-slate-900 bg-white/95 hover:bg-white shadow-sm ring-1 ring-black/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-white/70"
            >
              {secondary.label}
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
</section>
