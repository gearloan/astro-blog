---
// src/components/magazine/Sidebar.astro
export interface Props {
  publicationTitle: string;
  issueInfo: string;
  coverImg: string;
  link?: string;
  storiesRead?: string;
  percentRead?: number | string;
  bgColor?: string;
  alt?: string;
}

const {
  publicationTitle,
  issueInfo,
  coverImg,
  link = "/magazine/issue",
  storiesRead = "12/18",
  percentRead = 35,
  bgColor = "#001d3d",
  alt = "Cover",
} = Astro.props;

const width = typeof percentRead === "number" ? `${percentRead}%` : percentRead;
---

  <aside
    class="  text-white text-center
          p-4 md:p-6
          flex flex-col md:sticky md:top-[75px] md:self-start
          md:h-[calc(100vh-75px)] md:items-center
          "
    style={`background-color: ${bgColor};`}
  >

<div class="relative h-[90px] overflow-hidden">
    <!-- Mobile condensed layout -->
    <div class="md:hidden sticky top-0 z-10 flex items-center gap-4">
      <img src="../../images/ui/logo-small-white.svg" alt="Logo" class="h-10 w-auto" />
      <div class="flex-1 text-left">
        <div class="text-xs uppercase tracking-widest">{publicationTitle}</div>
        <div class="text-xs font-light">{issueInfo}</div>
      </div>
      <img src={coverImg} alt={alt} class="h-16 w-auto rounded shadow" />
    </div>
    </aside></div>

    <!-- Desktop vertical layout -->
    <div class="hidden md:flex md:flex-col md:items-center md:text-center">
      <img src="../../images/ui/logo-small-white.svg" alt="Logo" class="px-10 block my-6" />
      <div class="text-sm uppercase tracking-widest mb-1">{publicationTitle}</div>
      <div class="text-sm font-light tracking-wide mb-4">{issueInfo}</div>

      <a href={link}>
        <img src={coverImg} alt={alt} class="rounded shadow-lg mt-8" loading="lazy" />
      </a>

      <p class="mt-12">
        {storiesRead}<br />stories read
      </p>

      <div class="w-full px-6 my-2">
        <div class="w-full h-4 bg-gray-300 rounded-full shadow-inner relative overflow-hidden">
          <div
            class="h-full rounded-full shadow-[0_2px_4px_rgba(0,0,0,0.3)] bg-[#00bcd4]"
            style={`width: ${width};`}
          ></div>
        </div>
      </div>
    </div>
  </aside>
