---
// src/components/magazine/Sidebar.astro
export interface Props {
  publicationTitle: string;
  issueInfo: string;
  coverImg: string;
  link?: string;
  storiesRead?: string;
  percentRead?: number | string;
  bgColor?: string;
  alt?: string;
}

const {
  publicationTitle,
  issueInfo,
  coverImg,
  link = "/magazine/issue",
  storiesRead = "12/18",
  percentRead = 35,
  bgColor = "#001d3d",
  alt = "Cover",
} = Astro.props;

const width = typeof percentRead === "number" ? `${percentRead}%` : percentRead;
---

<aside
  class="sticky top-[75px] self-start h-[calc(100vh-75px)] flex flex-col items-center text-white text-center p-6"
  style={`background-color: ${bgColor};`}
>
  <img src="../../images/ui/logo-small-white.svg" alt="Logo" class="px-10 block my-6" />
  <div class="text-sm uppercase tracking-widest mb-1">{publicationTitle}</div>
  <div class="text-sm font-light tracking-wide mb-4">{issueInfo}</div>

  <a href={link}>
    <img src={coverImg} alt={alt} class="rounded shadow-lg mt-8" loading="lazy" />
  </a>

  <p class="mt-12">
    {storiesRead}<br />stories read
  </p>

  <div class="w-full px-6 my-2">
    <div class="w-full h-4 bg-gray-300 rounded-full shadow-inner relative overflow-hidden">
      <div
        class="h-full rounded-full shadow-[0_2px_4px_rgba(0,0,0,0.3)] bg-[#00bcd4]"
        style={`width: ${width};`}
      ></div>
    </div>
  </div>
</aside>
  